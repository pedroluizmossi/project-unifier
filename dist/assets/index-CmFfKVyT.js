import R,{useState as g,useCallback as A}from"https://esm.sh/react@19.1.0";import{createRoot as O}from"https://esm.sh/react-dom@19.1.0/client";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var k={exports:{}},b={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _;function M(){if(_)return b;_=1;var n=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function t(r,s,l){var i=null;if(l!==void 0&&(i=""+l),s.key!==void 0&&(i=""+s.key),"key"in s){l={};for(var c in s)c!=="key"&&(l[c]=s[c])}else l=s;return s=l.ref,{$$typeof:n,type:r,key:i,ref:s!==void 0?s:null,props:l}}return b.Fragment=o,b.jsx=t,b.jsxs=t,b}var N;function z(){return N||(N=1,k.exports=M()),k.exports}var e=z();const D=[".git*","*/.git*",".svn","*/.svn",".hg","*/.hg",".idea","*/.idea",".vscode","*/.vscode","*.swp","*.swo","node_modules","*/node_modules","bower_components","*/bower_components","vendor","*/vendor","build","*/build","dist","*/dist","target","*/target","__pycache__","*/__pycache__","*.pyc","*.pyo","*.pyd",".Python","*.egg-info","venv",".venv","*/venv","*/.venv",".DS_Store","Thumbs.db","*.exe","*.dll","*.so","*.dylib","*.o","*.a","*.lib","*.class","*.jar","*.war","*.ear","*.log","*.tmp","*.temp","*_unified_*.txt","*_unified_*.md","*_unified_*.json"],B={".py":"python",".js":"javascript",".ts":"typescript",".jsx":"jsx",".tsx":"tsx",".html":"html",".css":"css",".scss":"scss",".json":"json",".xml":"xml",".yml":"yaml",".yaml":"yaml",".md":"markdown",".sql":"sql",".sh":"shell",".bat":"batch",".ps1":"powershell",".java":"java",".c":"c",".cpp":"cpp",".h":"c",".hpp":"cpp",".cs":"csharp",".rb":"ruby",".go":"go",".rs":"rust",".php":"php",".vue":"vue",".dockerfile":"dockerfile",".toml":"toml"},$=n=>{const t=n.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*\*\//g,"(.*/)?").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"[^/]");return t.startsWith("(.*/)?")?new RegExp(`^${t.substring(5)}$`):new RegExp(`^${t}$`)},v=(n,o)=>{const t=n.replace(/\\/g,"/"),r=t.split("/"),s=r[r.length-1];for(const l of o){const c=l.endsWith("/")?t+"/":t;if(l.includes("/")){if($(l).test(c))return!0}else if($(l).test(s))return!0}return!1},I=async(n,o)=>{const t=[],r=async(s,l)=>{for await(const i of s.values()){const c=`${l}${i.name}`;v(c,o)||v(`${c}/`,o)||(i.kind==="file"?t.push({handle:i,path:c}):i.kind==="directory"&&await r(i,`${c}/`))}};return await r(n,""),t},H=async(n,o)=>{let t=`${n.name}
`;const r=async(s,l)=>{const i=[];for await(const a of s.values())i.push(a);i.sort((a,x)=>a.kind.localeCompare(x.kind)||a.name.localeCompare(x.name));const c=i.filter(a=>!v(`${l.replace(/[â”‚â”€â””â”œ ]/g,"")}${a.name}`,o));for(let a=0;a<c.length;a++){const x=c[a],m=a===c.length-1;t+=`${l}${m?"â””â”€â”€ ":"â”œâ”€â”€ "}${x.name}
`,x.kind==="directory"&&await r(x,`${l}${m?"    ":"â”‚   "}`)}};return await r(n,""),t},S=async n=>{const o=await n.arrayBuffer(),t=await crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")},J=async(n,o,t)=>{try{const r=await n.getFile(),s=r.size,l=`.${r.name.split(".").pop()||""}`;if(t>0&&s>t)return{path:o,size_kb:s/1024,type:"large_file",sha256:await S(r)};try{const i=await r.text();return{path:o,size_kb:s/1024,type:"text_file",content:i,line_count:i.split(`
`).length,language:B[l.toLowerCase()]||""}}catch{return{path:o,size_kb:s/1024,type:"binary_file",sha256:await S(r)}}}catch(r){return console.warn(`Could not process file ${o}:`,r),null}},U=n=>Math.ceil(n.length/4),q=n=>{let o=["---",`project_name: ${n.project_name}`,`generation_timestamp_utc: ${new Date().toISOString()}`,"---",""];return n.directory_tree&&o.push(`## ðŸŒ³ Directory Structure

\`\`\`
${n.directory_tree.trim()}
\`\`\`
`),n.files_data.text_files.length>0&&(o.push(`## ðŸ“„ Text File Contents
`),n.files_data.text_files.forEach(t=>{o.push(`### \`${t.path}\` (Metadata: ${t.line_count} lines, ${t.size_kb.toFixed(2)} KB)
`),o.push(`\`\`\`${t.language}
${t.content}
\`\`\`
`)})),n.files_data.large_files.length>0&&(o.push(`## ðŸ“¦ Large Files (Content Omitted)
`),n.files_data.large_files.forEach(t=>o.push(`- \`${t.path}\` (${t.size_kb.toFixed(2)} KB, SHA256: \`${t.sha256}\`)`)),o.push(`
`)),n.files_data.binary_files.length>0&&(o.push(`## ðŸŽ² Binary Files (Content Omitted)
`),n.files_data.binary_files.forEach(t=>o.push(`- \`${t.path}\` (${t.size_kb.toFixed(2)} KB, SHA256: \`${t.sha256}\`)`)),o.push(`
`)),o.join(`
`)},W=n=>{const o={};return n.forEach(t=>{let r=o;const s=t.path.split("/");s.forEach((l,i)=>{i===s.length-1?r[l]=t:(r[l]=r[l]||{},r=r[l])})}),o},L=(n,o,t)=>n.path?{name:o,type:"file",path:t,...n}:{name:o,type:"directory",path:t,children:Object.entries(n).map(([r,s])=>L(s,r,t?`${t}/${r}`:r)).sort((r,s)=>r.name.localeCompare(s.name))},G=(n,o)=>{const t=W(n);return L(t,o,"")},Y=()=>{const[n,o]=g(!1),[t,r]=g("Select a directory to begin."),[s,l]=g(""),[i,c]=g(null),[a,x]=g(null),m=A(async p=>{if(!("showDirectoryPicker"in window)){alert("Your browser does not support the File System Access API. Please use a modern browser like Chrome or Edge.");return}try{const d=await window.showDirectoryPicker();o(!0),c(d.name),l(""),x(null),r("Collecting files...");const f=p.ignorePatterns.split(`
`).filter(u=>u.trim()!==""),y=await I(d,f);r(`Found ${y.length} files. Processing...`);const P=p.maxFileSize>0?p.maxFileSize*1024:-1,T=y.map(u=>J(u.handle,u.path,P)),F=(await Promise.all(T)).filter(u=>u!==null),h={text_files:[],binary_files:[],large_files:[]};F.forEach(u=>{u.type==="text_file"?h.text_files.push(u):u.type==="binary_file"?h.binary_files.push(u):h.large_files.push(u)});let w="";if(p.outputFormat==="markdown"){r("Generating Markdown output...");const u=p.includeTree?await H(d,f):void 0;w=q({project_name:d.name,directory_tree:u,files_data:h})}else{r("Generating JSON output...");const u=[...h.text_files,...h.binary_files,...h.large_files],E=G(u,d.name);w=JSON.stringify({project_name:d.name,project_tree:E,metadata:{generation_timestamp_utc:new Date().toISOString(),summary:{text_files:h.text_files.length,binary_files:h.binary_files.length,large_files:h.large_files.length}}},null,2)}l(w),x({text:h.text_files.length,binary:h.binary_files.length,large:h.large_files.length,tokens:U(w)}),r(`Processing complete for ${d.name}.`)}catch(d){d.name!=="AbortError"?(console.error("Error processing directory:",d),r(`An error occurred: ${d.message}`)):r("Directory selection cancelled.")}finally{o(!1)}},[]);return{isLoading:n,statusMessage:t,outputContent:s,directoryName:i,stats:a,processDirectory:m}},V=()=>e.jsxs("header",{className:"text-center w-full max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-indigo-600",children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),e.jsx("polyline",{points:"13 2 13 9 20 9"})]}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Project Unifier"})]}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mt-2",children:"Select a local directory to generate a single, context-rich file for LLMs."})]}),Z=({ignorePatterns:n,setIgnorePatterns:o,maxFileSize:t,setMaxFileSize:r,outputFormat:s,setOutputFormat:l,includeTree:i,setIncludeTree:c})=>e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ignore",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ignore Patterns"}),e.jsx("textarea",{id:"ignore",value:n,onChange:a=>o(a.target.value),rows:8,className:"mt-1 block w-full rounded-md bg-white dark:bg-slate-700/50 border-slate-300 dark:border-slate-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm font-mono text-xs"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-size",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Max File Size (KB)"}),e.jsx("input",{type:"number",id:"max-size",value:t,onChange:a=>r(Number(a.target.value)),className:"mt-1 block w-full rounded-md bg-white dark:bg-slate-700/50 border-slate-300 dark:border-slate-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"0 for unlimited"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Output Format"}),e.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[e.jsx("button",{onClick:()=>l("markdown"),className:`px-4 py-2 text-sm w-1/2 ${s==="markdown"?"bg-indigo-600 text-white":"bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600"} rounded-l-md border border-slate-300 dark:border-slate-600 focus:z-10 focus:ring-2 focus:ring-indigo-500 transition-colors`,children:"Markdown"}),e.jsx("button",{onClick:()=>l("json"),className:`-ml-px px-4 py-2 text-sm w-1/2 ${s==="json"?"bg-indigo-600 text-white":"bg-white dark:bg-slate-700 hover:bg-slate-50 dark:hover:bg-slate-600"} rounded-r-md border border-slate-300 dark:border-slate-600 focus:z-10 focus:ring-2 focus:ring-indigo-500 transition-colors`,children:"JSON"})]})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx("input",{id:"include-tree",type:"checkbox",checked:i,disabled:s==="json",onChange:a=>c(a.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 disabled:opacity-50"})}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("label",{htmlFor:"include-tree",className:`font-medium ${s==="json"?"text-slate-400 dark:text-slate-500":""}`,children:"Include Directory Tree"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs",children:"(Markdown only)"})]})]})]})}),j=({icon:n,label:o,value:t})=>e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700/50 rounded-md p-2",children:[e.jsx("div",{className:"text-indigo-500",children:n}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:t}),e.jsx("span",{className:"text-slate-500 dark:text-slate-400 ml-1",children:o})]})]}),Q=({isLoading:n,statusMessage:o,stats:t,outputContent:r,directoryName:s,outputFormat:l})=>{const[i,c]=g(!1),a=()=>{r&&navigator.clipboard.writeText(r).then(()=>{c(!0),setTimeout(()=>c(!1),2e3)},m=>{console.error("Could not copy text: ",m),alert("Failed to copy!")})},x=()=>{if(!r)return;const m=new Blob([r],{type:"text/plain;charset=utf-8"}),p=URL.createObjectURL(m),d=document.createElement("a"),f=l==="json"?"json":"md";d.href=p,d.download=`${s||"project"}_unified_${new Date().toISOString().split("T")[0]}.${f}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(p)};return e.jsxs("div",{className:"flex flex-col gap-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 min-h-[500px] lg:min-h-0",children:[e.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Output"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 h-5",children:o}),t&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsx(j,{icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e.jsx("polyline",{points:"10 9 9 9 8 9"})]}),label:"Text",value:t.text}),e.jsx(j,{icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2.4-2.2-4.5-4.4-5.9-2.2-1.4-4.8-2-7.5-1.4s-5.1 2.4-6.4 4.8c-1.3 2.4-1.2 5.2.3 7.5s3.5 4.1 6.1 4.7c2.6.6 5.3.2 7.5-1.1"}),e.jsx("path",{d:"m18 18-6-6 6-6"})]}),label:"Binary",value:t.binary}),e.jsx(j,{icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),e.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"}),e.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"})]}),label:"Large",value:t.large}),e.jsx(j,{icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.5A4.5 4.5 0 0 0 17.5 5c-.58 0-1.13.15-1.61.4-.48-.25-1.03-.4-1.61-.4A4.5 4.5 0 0 0 9.5 9.5c0 4.5 3 12.5 6 12.5s1.5-1.06 4-1.06Z"}),e.jsx("path",{d:"M12 20.94c-1.5 0-2.75 1.06-4 1.06-3 0-6-8-6-12.5A4.5 4.5 0 0 1 6.5 5c.58 0 1.13.15 1.61.4.48-.25 1.03-.4 1.61-.4A4.5 4.5 0 0 1 14.5 9.5c0 4.5-3 12.5-6 12.5Z"})]}),label:"Tokens",value:`~${t.tokens.toLocaleString()}`})]})]}),e.jsx("div",{className:"flex-grow flex flex-col overflow-hidden",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-t-lg",children:[e.jsx("span",{className:`text-xs text-green-600 dark:text-green-400 transition-opacity ${i?"copied-feedback":"opacity-0"}`,children:"Copied!"}),e.jsx("button",{onClick:a,className:"text-xs font-medium rounded-md px-3 py-1 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Copy"}),e.jsx("button",{onClick:x,className:"text-xs font-medium rounded-md px-3 py-1 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Download"})]}),e.jsx("div",{className:"flex-grow min-h-[350px] max-h-[600px] overflow-y-auto rounded-b-lg bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700",children:e.jsx("pre",{className:"text-xs p-4 m-0 overflow-x-auto",children:e.jsx("code",{className:"whitespace-pre-wrap break-words",children:r})})})]}):e.jsx("div",{className:"flex-grow flex items-center justify-center text-slate-500 dark:text-slate-400 p-4 text-center",children:n?"Generating output, this might take a moment...":"Output will appear here..."})})]})},X=()=>{const[n,o]=g(D.join(`
`)),[t,r]=g(5120),[s,l]=g("markdown"),[i,c]=g(!0),{isLoading:a,statusMessage:x,outputContent:m,directoryName:p,stats:d,processDirectory:f}=Y(),y=()=>{f({ignorePatterns:n,maxFileSize:t,outputFormat:s,includeTree:i})};return e.jsxs("div",{className:"min-h-screen flex flex-col p-4 sm:p-6 lg:p-8",children:[e.jsx(V,{}),e.jsxs("main",{className:"flex-grow w-full max-w-7xl mx-auto flex flex-col gap-8 mt-8",children:[e.jsx("div",{className:"flex flex-col lg:flex-row gap-8",children:e.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[e.jsx(Z,{ignorePatterns:n,setIgnorePatterns:o,maxFileSize:t,setMaxFileSize:r,outputFormat:s,setOutputFormat:l,includeTree:i,setIncludeTree:c}),e.jsxs("button",{onClick:y,disabled:a,className:"w-full flex justify-center items-center gap-3 rounded-lg bg-indigo-600 px-4 py-3 text-base font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors",children:[a&&e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full spinner"}),a?"Processing...":"Select Directory & Unify"]})]})}),e.jsx("div",{className:"mt-8",children:e.jsx(Q,{isLoading:a,statusMessage:x,stats:d,outputContent:m,directoryName:p,outputFormat:s})})]})]})},C=document.getElementById("root");C?O(C).render(e.jsx(R.StrictMode,{children:e.jsx(X,{})})):console.error("Root element not found");
